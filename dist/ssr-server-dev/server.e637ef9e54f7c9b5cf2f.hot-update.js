exports.id = "server";
exports.modules = {

/***/ "./src/app/pages/RecordMgr/List/list.tsx":
/*!***********************************************!*\
  !*** ./src/app/pages/RecordMgr/List/list.tsx ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ \"@babel/runtime/regenerator\"));\n\nvar _modal = _interopRequireDefault(__webpack_require__(/*! antd/lib/modal */ \"antd/lib/modal\"));\n\nvar _row = _interopRequireDefault(__webpack_require__(/*! antd/lib/row */ \"antd/lib/row\"));\n\nvar _pagination = _interopRequireDefault(__webpack_require__(/*! antd/lib/pagination */ \"antd/lib/pagination\"));\n\nvar _message2 = _interopRequireDefault(__webpack_require__(/*! antd/lib/message */ \"antd/lib/message\"));\n\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"@babel/runtime/helpers/slicedToArray\"));\n\nvar _layout = _interopRequireDefault(__webpack_require__(/*! antd/lib/layout */ \"antd/lib/layout\"));\n\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"react\"));\n\nvar _reactRedux = __webpack_require__(/*! react-redux */ \"react-redux\");\n\nvar _antd = __webpack_require__(/*! antd */ \"antd\");\n\nvar _ListTable = _interopRequireDefault(__webpack_require__(/*! ../ListTable */ \"./src/app/pages/RecordMgr/ListTable/index.tsx\"));\n\nvar _ListFilterForm = _interopRequireDefault(__webpack_require__(/*! ../ListFilterForm */ \"./src/app/pages/RecordMgr/ListFilterForm/index.tsx\"));\n\nvar _config = __webpack_require__(/*! ./config */ \"./src/app/pages/RecordMgr/List/config.ts\");\n\nvar actions = _interopRequireWildcard(__webpack_require__(/*! @/store/record/action */ \"./src/app/store/record/action.ts\"));\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./src/app/pages/RecordMgr/List/utils.ts\");\n\n__webpack_require__(/*! ./index.less */ \"./src/app/pages/RecordMgr/List/index.less\");\n\nvar _utils2 = __webpack_require__(/*! @/utils/utils */ \"./src/app/utils/utils.ts\");\n\nvar _config2 = __webpack_require__(/*! @/store/record/config */ \"./src/app/store/record/config.ts\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Content = _layout.default.Content;\n\nfunction RecordList(props) {\n  console.log(\"RecordList.props \\u2764\\u2764\\u2764\", props);\n  var g_RENDER_WAY = props.g_RENDER_WAY,\n      list = props.list,\n      countTotal = props.countTotal,\n      location = props.location,\n      history = props.history,\n      deleteItemsRequestAction = props.deleteItemsRequestAction,\n      handleToggleRowSelectAction = props.handleToggleRowSelectAction,\n      fetchListRequestAction = props.fetchListRequestAction,\n      addItemRequestAction = props.addItemRequestAction;\n\n  var _useState = (0, _react.useState)(_config.basePageConfig),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      pageConfig = _useState2[0],\n      setPageConfig = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(_config.baseFormConfig),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      formConfig = _useState4[0],\n      setFormConfig = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      tableLoading = _useState6[0],\n      setTableLoading = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      isDeleteModalVisible = _useState8[0],\n      setIsDeleteModelVisible = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(''),\n      _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n      deleteModalTargetTitle = _useState10[0],\n      setDeleteModalTargetTitle = _useState10[1];\n  /* ... */\n\n\n  var pageConfigReference = (0, _react.useRef)(null);\n  pageConfigReference.current = pageConfig;\n  var formConfigReference = (0, _react.useRef)(null);\n  formConfigReference.current = formConfig;\n  var propsListReference = (0, _react.useRef)(null);\n  propsListReference.current = list;\n  var handleSearch = (0, _react.useCallback)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            history.push({\n              pathname: location.pathname,\n              search: (0, _utils.createSearchString)(1, +pageConfigReference.current.pageSize, formConfigReference.current.keywords)\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  var handleFresh = (0, _react.useCallback)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            history.push({\n              pathname: location.pathname,\n              search: (0, _utils.createSearchString)(+pageConfigReference.current.pageIndex, +pageConfigReference.current.pageSize, formConfigReference.current.keywords)\n            });\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), []);\n  var handleModifyFormInput = (0, _react.useCallback)(function ($evte) {\n    var value = $evte.target.value;\n    setFormConfig(function (formConfig) {\n      return _objectSpread(_objectSpread({}, formConfig), {}, {\n        keywords: value\n      });\n    });\n  }, []);\n  var onDialogEditFormClosed = (0, _react.useCallback)(function (hasSubmitedItem) {\n    if (hasSubmitedItem) {\n      fetchTableData(_objectSpread(_objectSpread({}, pageConfigReference.current), formConfigReference.current));\n    }\n  }, []);\n  var onPaginationChange = (0, _react.useCallback)(function (pageIndex, pageSize) {\n    history.push({\n      pathname: location.pathname,\n      search: (0, _utils.createSearchString)(pageIndex, +(pageSize || _config.basePageConfig.pageSize), formConfigReference.current.keywords)\n    });\n  }, []);\n  var fetchTableData = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(params) {\n      var res, _countTotal;\n\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setTableLoading(true);\n              _context3.prev = 1;\n              _context3.next = 4;\n              return fetchListRequestAction(params);\n\n            case 4:\n              res = _context3.sent;\n              _countTotal = typeof res.data.countTotal !== 'undefined' ? res.data.countTotal : pageConfig.countTotal;\n              setPageConfig(function (pageConfig) {\n                return _objectSpread(_objectSpread({}, pageConfig), {}, {\n                  countTotal: _countTotal\n                });\n              });\n              setTableLoading(false);\n              _context3.next = 14;\n              break;\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n\n              _message2.default.error(_context3.t0.msg);\n\n              setTableLoading(false);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 10]]);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), []);\n  var deleteRowData = (0, _react.useCallback)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n    var selectedIdList, res;\n    return _regenerator.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            selectedIdList = propsListReference.current.filter(function (item, index) {\n              return item.isChcked;\n            }).map(function (item, index) {\n              return item.id;\n            });\n            _context4.prev = 1;\n            _context4.next = 4;\n            return deleteItemsRequestAction(selectedIdList);\n\n          case 4:\n            res = _context4.sent;\n\n            _message2.default.success(\"Deleted Success\");\n\n            setIsDeleteModelVisible(false);\n            _context4.next = 12;\n            break;\n\n          case 9:\n            _context4.prev = 9;\n            _context4.t0 = _context4[\"catch\"](1);\n\n            _message2.default.error(_context4.t0.msg);\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[1, 9]]);\n  })), []);\n  var handleDeleteItem = (0, _react.useCallback)(function (itemData) {\n    handleToggleRowSelectAction([itemData.key]);\n    setIsDeleteModelVisible(true);\n  }, []);\n  (0, _react.useEffect)(function () {\n    var pageIndex = +(0, _utils2.getQueryValueOfUrl)('pageIndex') || pageConfig.pageIndex;\n    var pageSize = +(0, _utils2.getQueryValueOfUrl)('pageSize') || pageConfig.pageSize;\n    var keywords = decodeURI((0, _utils2.getQueryValueOfUrl)('keywords') || '');\n    setPageConfig(_objectSpread(_objectSpread({}, pageConfig), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex,\n      countTotal: countTotal\n    }));\n    setFormConfig(_objectSpread(_objectSpread({}, formConfig), {}, {\n      keywords: keywords\n    }));\n    fetchTableData({\n      pageIndex: pageIndex,\n      pageSize: pageSize,\n      keywords: keywords\n    });\n  }, [location]);\n  (0, _react.useEffect)(function () {\n    if (!isDeleteModalVisible) {\n      return;\n    }\n\n    var selectedList = list.filter(function (item, index) {\n      return item.isChcked;\n    });\n    setDeleteModalTargetTitle(selectedList.length ? selectedList[0].title : '');\n  }, [isDeleteModalVisible]);\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"section\", {\n    className: \"list-container\"\n  }, /*#__PURE__*/_react.default.createElement(\"section\", {\n    className: \"list-wrapper\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"list-header\"\n  }, /*#__PURE__*/_react.default.createElement(_ListFilterForm.default, {\n    onDialogEditFormClosed: onDialogEditFormClosed,\n    handleAddItem: addItemRequestAction,\n    keywordsValue: formConfig.keywords,\n    handleKeywordsEnterAction: handleSearch,\n    handleKeywordsChangeAction: handleModifyFormInput,\n    handleRefreshAction: handleFresh\n  })), /*#__PURE__*/_react.default.createElement(Content, null, /*#__PURE__*/_react.default.createElement(_ListTable.default, {\n    handleDeleteItem: handleDeleteItem,\n    handleToggleRowSelect: handleToggleRowSelectAction,\n    loading: tableLoading,\n    list: list\n  })), /*#__PURE__*/_react.default.createElement(_row.default, {\n    className: \"pagination-wrapper\"\n  }, /*#__PURE__*/_react.default.createElement(_pagination.default, {\n    size: \"small\",\n    total: pageConfig.countTotal,\n    current: pageConfig.pageIndex,\n    pageSize: pageConfig.pageSize,\n    showSizeChanger: true,\n    showQuickJumper: true,\n    onChange: onPaginationChange\n  })), /*#__PURE__*/_react.default.createElement(_row.default, {\n    className: \"total-count-wrapper\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", null, \"Total Count: \", countTotal)))), /*#__PURE__*/_react.default.createElement(_modal.default, {\n    title: \"Modal\",\n    visible: isDeleteModalVisible,\n    onOk: deleteRowData,\n    onCancel: function onCancel() {\n      setIsDeleteModelVisible(false);\n    }\n  }, /*#__PURE__*/_react.default.createElement(\"p\", null, \"Are you sure you want to delete \", /*#__PURE__*/_react.default.createElement(\"span\", {\n    style: {\n      color: '#ff0000'\n    }\n  }, deleteModalTargetTitle), \" ?\")));\n}\n\nvar _default = (0, _reactRedux.connect)(function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var ownProps = arguments.length > 1 ? arguments[1] : undefined;\n  return _objectSpread(_objectSpread({}, ownProps), state[_config2.REDUCER_RECORD_REDUCER]);\n}, _objectSpread({}, actions))(RecordList);\n\nexports.default = _default;\n\n//# sourceURL=webpack:///./src/app/pages/RecordMgr/List/list.tsx?");

/***/ })

};